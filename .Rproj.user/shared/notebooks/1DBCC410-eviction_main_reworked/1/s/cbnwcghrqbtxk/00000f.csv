"0","# Define temporal cutoff for train/test split."
"0","train_end_date <- as.Date(""2023-12-31"")"
"0","test_start_date <- as.Date(""2024-01-01"")"
"0",""
"0","# Filter for all variables needed by most complex model."
"0","df_train <- df_model_prep %>%"
"0","  filter("
"0","    date <= train_end_date,"
"0","    !is.na(filings_ma3),           # All models use this."
"0","    !is.na(spatial_lag_filings),   # Models 2-4 use this. "
"0","    !is.na(delinquent_prop_count), # Models 2-4 use this."
"0","    !is.na(pct_renter),            # Models 3-4 use this."
"0","    !is.na(poverty_rate),          # Models 3-4 use this."
"0","    !is.na(severe_rent_burden),    # Models 3-4 use this."
"0","    !is.na(pct_single_mother),     # Models 3-4 use this."
"0","    !is.na(racial_majority),       # Models 3-4 use this."
"0","    !is.na(moratorium_active)"
"0","  )"
"0",""
"0","df_test <- df_model_prep %>%"
"0","  filter("
"0","    date >= test_start_date,"
"0","    !is.na(filings_ma3),"
"0","    !is.na(spatial_lag_filings),"
"0","    !is.na(delinquent_prop_count),"
"0","    !is.na(pct_renter),"
"0","    !is.na(poverty_rate),"
"0","    !is.na(severe_rent_burden),"
"0","    !is.na(pct_single_mother),"
"0","    !is.na(racial_majority),"
"0","    !is.na(moratorium_active)"
"0","  )"
"0",""
"0","# Display split statistics."
"0","cat(""TRAIN/TEST SPLIT SUMMARY\n"")"
"1","TRAIN/TEST SPLIT SUMMARY
"
"0","cat(sprintf(""Training Period: %s to %s\n"", min(df_train$date), max(df_train$date)))"
"1","Training Period: 2020-04-01 to 2023-12-01
"
"0","cat(sprintf(""Training Observations: %s\n"", comma(nrow(df_train))))"
"1","Training Observations: 17,280
"
"0","cat(sprintf(""Training Months: %d\n"", n_distinct(df_train$date)))"
"1","Training Months: 45
"
"0","cat(sprintf(""Test Period: %s to %s\n"", min(df_test$date), max(df_test$date)))"
"1","Test Period: 2024-01-01 to 2025-11-01
"
"0","cat(sprintf(""Test Observations: %s\n"", comma(nrow(df_test))))"
"1","Test Observations: 8,832
"
"0","cat(sprintf(""Test Months: %d\n"", n_distinct(df_test$date)))"
"1","Test Months: 23
"
