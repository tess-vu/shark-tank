"0","# Clean and prepare weekly data for finer temporal analysis."
"0","df_weekly <- df_weekly_raw %>%"
"0","  # Rename filings variable for consistency."
"0","  rename(filings_count = filings_2020) %>%"
"0","  # Convert week_date to proper date format."
"0","  mutate("
"0","    date = as.Date(week_date),"
"0","    year = year(date),"
"0","    month_num = month(date),"
"0","    week_of_year = week(date)"
"0","  ) %>%"
"0","  # Filter out rows with invalid dates."
"0","  filter(!is.na(date)) %>%"
"0","  # Convert GEOID to character for consistency."
"0","  mutate(GEOID = as.character(GEOID)) %>%"
"0","  # Create moratorium indicator."
"0","  mutate("
"0","    moratorium_active = ifelse("
"0","      date >= as.Date(""2020-03-01"") & date <= as.Date(""2021-09-30""),"
"0","      1,"
"0","      0"
"0","    )"
"0","  )"
"0",""
"0","# Check weekly temporal coverage."
"0","df_weekly %>%"
"0","  summarize("
"0","    min_date = min(date),"
"0","    max_date = max(date),"
"0","    n_weeks = n_distinct(date),"
"0","    n_tracts = n_distinct(GEOID),"
"0","    total_obs = n()"
"0","  ) %>%"
"0","  kable(caption = ""Weekly Data Temporal Coverage"") %>%"
"0","  kable_styling(bootstrap_options = c(""striped"", ""hover""))"
