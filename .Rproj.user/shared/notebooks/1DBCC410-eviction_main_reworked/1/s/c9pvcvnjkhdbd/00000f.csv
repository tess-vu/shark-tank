"0","# There are around 37% zeros, so add zero flags for last month and consecutive."
"0","df_model_prep <- df_model_prep %>%"
"0","  group_by(GEOID) %>%"
"0","  mutate("
"0","    was_zero_last_month = lag(ifelse(filings_count == 0, 1, 0)),"
"0","    consecutive_zeros = sequence(rle(filings_count == 0)$lengths) * (filings_count == 0)"
"0","  ) %>%"
"0","  ungroup()"
"0",""
"0","# Check missingness of zero flag variables."
"0","zero_coverage <- df_model_prep %>%"
"0","  summarize("
"0","    total_obs = n(),"
"0","    missing_zero_last_month = sum(is.na(was_zero_last_month)),"
"0","    missing_consecutive_zeros = sum(is.na(consecutive_zeros)),"
"0","    pct_missing_zero_last_month = missing_zero_last_month / total_obs * 100,"
"0","    pct_missing_consecutive_zeros = missing_consecutive_zeros / total_obs * 100"
"0","  )"
"0",""
"0","# Display zero flag coverage stats."
"0","zero_coverage %>%"
"0","  kable(digits = 1, caption = ""Zero Flag Variable Coverage Stats"") %>%"
"0","  kable_styling(bootstrap_options = c(""striped"", ""hover""))"
