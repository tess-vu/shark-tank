"0","# Clean and prepare monthly data with temporal and policy features."
"0","df_monthly <- df_monthly_raw %>%"
"0","  # Rename filings variable for clarity."
"0","  rename(filings_count = filings_2020) %>%"
"0","  # Parse month string to proper date format."
"0","  mutate("
"0","    date = as.Date(paste0(""01/"", month), format = ""%d/%m/%Y""),"
"0","    year = year(date),"
"0","    month_num = month(date),"
"0","    month_name = month(date, label = TRUE, abbr = FALSE)"
"0","  ) %>%"
"0","  # Filter out rows with invalid dates."
"0","  filter(!is.na(date)) %>%"
"0","  # Convert GEOID to character for joining operations."
"0","  mutate(GEOID = as.character(GEOID)) %>%"
"0","  # Create policy intervention indicator for eviction moratorium period."
"0","  mutate("
"0","    moratorium_active = ifelse("
"0","      date >= as.Date(""2020-03-01"") & date <= as.Date(""2021-09-30""),"
"0","      1,"
"0","      0"
"0","    ),"
"0","    # Create categorical period variable."
"0","    period = case_when("
"0","      date < as.Date(""2020-03-01"") ~ ""Pre-Moratorium"","
"0","      date >= as.Date(""2020-03-01"") & date <= as.Date(""2021-09-30"") ~ ""Moratorium"","
"0","      date > as.Date(""2021-09-30"") ~ ""Post-Moratorium"""
"0","    ),"
"0","    period = factor(period, levels = c(""Pre-Moratorium"", ""Moratorium"", ""Post-Moratorium""))"
"0","  ) %>%"
"0","  # Create seasonal indicators for seasonality analysis."
"0","  mutate("
"0","    season = case_when("
"0","      month_num %in% c(12, 1, 2) ~ ""Winter"","
"0","      month_num %in% c(3, 4, 5) ~ ""Spring"","
"0","      month_num %in% c(6, 7, 8) ~ ""Summer"","
"0","      month_num %in% c(9, 10, 11) ~ ""Fall"""
"0","    ),"
"0","    season = factor(season, levels = c(""Winter"", ""Spring"", ""Summer"", ""Fall""))"
"0","  ) %>%"
"0","  # Create post-moratorium ramp variable to capture rebound effect."
"0","  mutate("
"0","    post_moratorium_months = ifelse("
"0","      date > as.Date(""2021-09-30""),"
"0","      as.numeric(difftime(date, as.Date(""2021-09-30""), units = ""days"")) / 30,"
"0","      0"
"0","    )"
"0","  )"
"0",""
"0","# Display summary of cleaned monthly data."
"0","cat(""CLEANED MONTHLY DATA SUMMARY\n"")"
"1","CLEANED MONTHLY DATA SUMMARY
"
"0","summary(df_monthly %>% select(filings_count, date, year, moratorium_active))"
"1",""
"1"," filings_count    "
"1","      date           "
"1","      year     "
"1"," moratorium_active"
"1","
"
"1"," Min.   :  0.000  "
"1"," Min.   :2020-01-01  "
"1"," Min.   :2020  "
"1"," Min.   :0.0000   "
"1","
"
"1"," 1st Qu.:  0.000  "
"1"," 1st Qu.:2021-06-01  "
"1"," 1st Qu.:2021  "
"1"," 1st Qu.:0.0000   "
"1","
"
"1"," Median :  1.000  "
"1"," Median :2022-12-01  "
"1"," Median :2022  "
"1"," Median :0.0000   "
"1","
"
"1"," Mean   :  2.286  "
"1"," Mean   :2022-12-01  "
"1"," Mean   :2022  "
"1"," Mean   :0.2676   "
"1","
"
"1"," 3rd Qu.:  3.000  "
"1"," 3rd Qu.:2024-06-01  "
"1"," 3rd Qu.:2024  "
"1"," 3rd Qu.:1.0000   "
"1","
"
"1"," Max.   :694.000  "
"1"," Max.   :2025-11-01  "
"1"," Max.   :2025  "
"1"," Max.   :1.0000   "
"1","
"
