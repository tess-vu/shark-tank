"0","# Create risk quintile classification based on predicted values."
"0","df_test_risk <- df_test_pred %>%"
"0","  mutate("
"0","    risk_quintile = ntile(predicted, 5),"
"0","    risk_category = case_when("
"0","      risk_quintile == 1 ~ ""Lowest Risk"","
"0","      risk_quintile == 2 ~ ""Low Risk"","
"0","      risk_quintile == 3 ~ ""Moderate Risk"","
"0","      risk_quintile == 4 ~ ""High Risk"","
"0","      risk_quintile == 5 ~ ""Highest Risk"""
"0","    ),"
"0","    risk_category = factor(risk_category, "
"0","                          levels = c(""Lowest Risk"", ""Low Risk"", ""Moderate Risk"", "
"0","                                    ""High Risk"", ""Highest Risk""))"
"0","  )"
"0",""
"0","# Calculate observed filings by risk category."
"0","risk_validation <- df_test_risk %>%"
"0","  group_by(risk_category) %>%"
"0","  summarize("
"0","    n_tract_months = n(),"
"0","    mean_observed = mean(filings_count, na.rm = TRUE),"
"0","    median_observed = median(filings_count, na.rm = TRUE),"
"0","    total_filings = sum(filings_count, na.rm = TRUE),"
"0","    .groups = ""drop"""
"0","  ) %>%"
"0","  mutate(pct_total_filings = total_filings / sum(total_filings) * 100)"
"0",""
"0","# Display risk validation table."
"0","risk_validation %>%"
"0","  kable(digits = 2, caption = ""Observed Filings by Predicted Risk Category"") %>%"
"0","  kable_styling(bootstrap_options = c(""striped"", ""hover""))"
