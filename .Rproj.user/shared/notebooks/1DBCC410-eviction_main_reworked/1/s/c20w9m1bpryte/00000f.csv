"0","# Compare model fit statistics. Needed to add the following section because glmmTMB does not store $theta so need to get it"
"0","get_theta <- function(model) {"
"0","  suppressWarnings(as.numeric(sigma(model)))   # returns NA if not NB"
"0","}"
"0",""
"0","model_comparison <- data.frame("
"0","  model = c(""Baseline"", ""+ Tax and Spatial"", ""+ ACS"", ""+ Interactions""),"
"0","  aic = c(AIC(model_nb_1), AIC(model_nb_2), AIC(model_nb_3), AIC(model_nb_4)),"
"0","  theta = c(get_theta(model_nb_1), get_theta(model_nb_2), get_theta(model_nb_3), get_theta(model_nb_4)),"
"0","  loglik = c("
"0","    as.numeric(logLik(model_nb_1)),"
"0","    as.numeric(logLik(model_nb_2)),"
"0","    as.numeric(logLik(model_nb_3)),"
"0","    as.numeric(logLik(model_nb_4))"
"0","  )"
"0",") %>%"
"0","  mutate("
"0","    aic_change = aic - min(aic),"
"0","    rank = rank(aic)"
"0","  )"
"0",""
"0",""
"0","#model_comparison <- data.frame("
"0","#  model = c(""Baseline"", ""+ Tax and Spatial"", ""+ ACS"", ""+ Interactions""),"
"0","#  aic = c(AIC(model_nb_1), AIC(model_nb_2), AIC(model_nb_3), AIC(model_nb_4)),"
"0","#  theta = c(model_nb_1$theta, model_nb_2$theta, model_nb_3$theta, model_nb_4$theta),"
"0","#  loglik = c(logLik(model_nb_1), logLik(model_nb_2), logLik(model_nb_3), logLik(model_nb_4))"
"0","#) %>%"
"0","#  mutate("
"0","#    aic_change = aic - min(aic),"
"0","#    rank = rank(aic)"
"0","#  )"
"0",""
"0","model_comparison %>%"
"0","  kable(digits = 2, caption = ""Model Comparison Statistics (Lower AIC = Better Fit)"") %>%"
"0","  kable_styling(bootstrap_options = c(""striped"", ""hover""))"
