"0","#| fig-dpi: 300"
"0","#| fig-height: 10"
"0","#| fig-width: 10"
"0",""
"0",""
"0","# Extract standardized coefficients for interpretation - Rewritten"
"0","library(broom.mixed)"
"0","library(dplyr)"
"0","library(stringr)"
"0",""
"0","feature_importance <- broom.mixed::tidy(model_nb_enhanced, effect = ""fixed"") %>%"
"0","  filter(term != ""(Intercept)"") %>%                       # Drop intercept"
"0","  mutate("
"0","    abs_estimate = abs(estimate),                        # Absolute value for sorting"
"0","    direction = ifelse(estimate > 0, ""Positive"", ""Negative""),"
"0","    "
"0","    # Clean term names for readability"
"0","    term_clean = term %>%"
"0","      str_replace(""factor\\(month_num\\)"", ""Month "") %>%"
"0","      str_replace(""factor\\(racial_majority\\)"", """") %>%"
"0","      str_replace(""filings_"", ""Lag: "") %>%"
"0","      str_replace(""spatial_lag_filings"", ""Spatial Lag (Lagged)"") %>%"
"0","      str_replace(""log_avg_balance"", ""Tax Delinquency (Log)"") %>%"
"0","      str_replace(""pct_renter"", ""ACS: % Renter"") %>%"
"0","      str_replace(""poverty_rate"", ""ACS: Poverty Rate"") %>%"
"0","      str_replace(""severe_rent_burden"", ""ACS: Severe Rent Burden"") %>%"
"0","      str_replace(""unemployment_rate"", ""ACS: Unemployment Rate"") %>%"
"0","      str_replace(""log_median_income"", ""ACS: Median Income (Log)"") %>%"
"0","      str_replace(""pct_single_mother"", ""ACS: % Single Mother HH"") %>%"
"0","      str_replace(""moratorium_active"", ""Policy: Moratorium""),"
"0","    "
"0","    # Assign feature categories"
"0","    category = case_when("
"0","      str_detect(term_clean, ""Lag"") ~ ""Temporal"","
"0","      str_detect(term_clean, ""Spatial"") ~ ""Spatial"","
"0","      str_detect(term_clean, ""ACS"") ~ ""Socioeconomic (ACS)"","
"0","      str_detect(term_clean, ""Tax"") ~ ""Tax Delinquency"","
"0","      str_detect(term_clean, ""Month"") ~ ""Seasonality"","
"0","      str_detect(term_clean, ""Moratorium|Policy"") ~ ""Policy"","
"0","      TRUE ~ ""Demographic"""
"0","    )"
"0","  ) %>%"
"0","  arrange(desc(abs_estimate)) %>%   # Sort by importance"
"0","  slice_head(n = 20)                # Take top 20 features"
"0",""
"0","# View table"
"0","feature_importance"
